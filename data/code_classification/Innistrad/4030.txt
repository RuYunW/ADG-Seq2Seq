public class UndeadAlchemist extends CardImpl {°Ïpublic UndeadAlchemist(UUID ownerId) {°Ïsuper(ownerId, 84, "Undead Alchemist", Rarity.RARE, new CardType[]{CardType.CREATURE}, "{3}{U}");°Ïthis.expansionSetCode = "ISD";°Ïthis.subtype.add("Zombie");°Ïthis.power = new MageInt(4);°Ïthis.toughness = new MageInt(2);°Ïthis.addAbility(new SimpleStaticAbility(Zone.BATTLEFIELD, new UndeadAlchemistEffect()));°Ïthis.addAbility(new UndeadAlchemistTriggeredAbility());°Ï}°Ïpublic UndeadAlchemist(final UndeadAlchemist card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic UndeadAlchemist copy() {°Ïreturn new UndeadAlchemist(this);°Ï}°Ï}°Ïclass UndeadAlchemistTriggeredAbility extends TriggeredAbilityImpl {°Ïpublic UndeadAlchemistTriggeredAbility() {°Ïsuper(Zone.BATTLEFIELD, new ExileTargetEffect(), true);°Ïthis.addEffect(new CreateTokenEffect(new ZombieToken()));°Ï}°Ïpublic UndeadAlchemistTriggeredAbility(final UndeadAlchemistTriggeredAbility ability) {°Ïsuper(ability);°Ï}°Ï@Override°Ïpublic UndeadAlchemistTriggeredAbility copy() {°Ïreturn new UndeadAlchemistTriggeredAbility(this);°Ï}°Ï@Override°Ïpublic boolean checkEventType(GameEvent event, Game game) {°Ïreturn event.getType() == GameEvent.EventType.ZONE_CHANGE;°Ï}°Ï@Override°Ïpublic boolean checkTrigger(GameEvent event, Game game) {°ÏZoneChangeEvent zEvent = (ZoneChangeEvent) event;°Ïif (zEvent.getFromZone() == Zone.LIBRARY && zEvent.getToZone() == Zone.GRAVEYARD && game.getOpponents(this.getControllerId()).contains(zEvent.getPlayerId())) {°ÏCard card = game.getCard(event.getTargetId());°Ïif (card != null && card.getCardType().contains(CardType.CREATURE)) {°Ïthis.getEffects().get(0).setTargetPointer(new FixedTarget(card.getId()));°Ïreturn true;°Ï}°Ï}°Ïreturn false;°Ï}°Ï@Override°Ïpublic String getRule() {°Ïreturn "Whenever a creature card is put into an opponent's graveyard from his or her library, exile that card and put a 2/2 black Zombie creature token onto the battlefield.";°Ï}°Ï}°Ïclass UndeadAlchemistEffect extends ReplacementEffectImpl {°ÏUndeadAlchemistEffect() {°Ïsuper(Duration.WhileOnBattlefield, Outcome.RedirectDamage);°ÏstaticText = "If a Zombie you control would deal combat damage to a player, instead that player puts that many cards from the top of his or her library into his or her graveyard";°Ï}°ÏUndeadAlchemistEffect(final UndeadAlchemistEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic boolean replaceEvent(GameEvent event, Ability source, Game game) {°ÏPlayer player = game.getPlayer(event.getTargetId());°Ïif (player != null) {°Ïreturn player.moveCards(player.getLibrary().getTopCards(game, event.getAmount()), Zone.LIBRARY, Zone.GRAVEYARD, source, game);°Ï}°Ïreturn true;°Ï}°Ï@Override°Ïpublic boolean checksEventType(GameEvent event, Game game) {°Ïreturn event.getType() == GameEvent.EventType.DAMAGE_PLAYER;°Ï}°Ï@Override°Ïpublic boolean applies(GameEvent event, Ability source, Game game) {°ÏDamagePlayerEvent damageEvent = (DamagePlayerEvent) event;°Ïif (damageEvent.isCombatDamage()) {°ÏPermanent permanent = game.getPermanent(event.getSourceId());°Ïif (permanent != null && permanent.hasSubtype("Zombie")) {°Ïreturn true;°Ï}°Ï}°Ïreturn false;°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°Ïreturn true;°Ï}°Ï@Override°Ïpublic UndeadAlchemistEffect copy() {°Ïreturn new UndeadAlchemistEffect(this);°Ï}°Ï}°Ï
