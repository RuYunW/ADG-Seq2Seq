public class DelverOfSecrets extends CardImpl {°Ïpublic DelverOfSecrets(UUID ownerId) {°Ïsuper(ownerId, 51, "Delver of Secrets", Rarity.COMMON, new CardType[]{CardType.CREATURE}, "{U}");°Ïthis.expansionSetCode = "ISD";°Ïthis.subtype.add("Human");°Ïthis.subtype.add("Wizard");°Ïthis.power = new MageInt(1);°Ïthis.toughness = new MageInt(1);°Ïthis.canTransform = true;°Ïthis.secondSideCard = new InsectileAberration(ownerId);°Ïthis.addAbility(new TransformAbility());°Ïthis.addAbility(new BeginningOfUpkeepTriggeredAbility(new DelverOfSecretsEffect(), TargetController.YOU, false));°Ï}°Ïpublic DelverOfSecrets(final DelverOfSecrets card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic DelverOfSecrets copy() {°Ïreturn new DelverOfSecrets(this);°Ï}°Ï}°Ïclass DelverOfSecretsEffect extends OneShotEffect {°Ïprivate static final FilterCard filter = new FilterInstantOrSorceryCard();°Ïpublic DelverOfSecretsEffect() {°Ïsuper(Outcome.Benefit);°Ïthis.staticText = "look at the top card of your library. You may reveal that card. If an instant or sorcery card is revealed this way, transform {this}";°Ï}°Ïpublic DelverOfSecretsEffect(final DelverOfSecretsEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic DelverOfSecretsEffect copy() {°Ïreturn new DelverOfSecretsEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPlayer player = game.getPlayer(source.getControllerId());°ÏPermanent sourcePermanent = game.getPermanentOrLKIBattlefield(source.getSourceId());°Ïif (player != null && sourcePermanent != null) {°Ïif (player.getLibrary().size() > 0) {°ÏCard card = player.getLibrary().getFromTop(game);°ÏCards cards = new CardsImpl();°Ïcards.add(card);°Ïplayer.lookAtCards(sourcePermanent.getName(), cards, game);°Ïif (player.chooseUse(Outcome.DrawCard, "Do you wish to reveal the card at the top of the library?", source, game)) {°Ïplayer.revealCards(sourcePermanent.getName(), cards, game);°Ïif (filter.match(card, game)) {°Ïreturn new TransformSourceEffect(true, true).apply(game, source);°Ï}°Ï}°Ï}°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ï
