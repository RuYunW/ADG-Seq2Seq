public class DivineReckoning extends CardImpl {°Ïpublic DivineReckoning(UUID ownerId) {°Ïsuper(ownerId, 10, "Divine Reckoning", Rarity.RARE, new CardType[]{CardType.SORCERY}, "{2}{W}{W}");°Ïthis.expansionSetCode = "ISD";°Ïthis.getSpellAbility().addEffect(new DivineReckoningEffect());°Ïthis.addAbility(new FlashbackAbility(new ManaCostsImpl("{5}{W}{W}"), TimingRule.SORCERY));°Ï}°Ïpublic DivineReckoning(final DivineReckoning card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic DivineReckoning copy() {°Ïreturn new DivineReckoning(this);°Ï}°Ï}°Ïclass DivineReckoningEffect extends OneShotEffect {°Ïpublic DivineReckoningEffect() {°Ïsuper(Outcome.DestroyPermanent);°ÏstaticText = "Each player chooses a creature he or she controls. Destroy the rest";°Ï}°Ïpublic DivineReckoningEffect(DivineReckoningEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏList<Card> chosen = new ArrayList<>();°ÏPlayer controller = game.getPlayer(source.getControllerId());°Ïif (controller != null) {°Ïfor (UUID playerId : game.getState().getPlayersInRange(controller.getId(), game)) {°ÏPlayer player = game.getPlayer(playerId);°ÏTarget target = new TargetControlledPermanent(1, 1, new FilterControlledCreaturePermanent(), true);°Ïif (target.canChoose(player.getId(), game)) {°Ïwhile (player.canRespond() && !target.isChosen() && target.canChoose(player.getId(), game)) {°Ïplayer.chooseTarget(Outcome.Benefit, target, source, game);°Ï}°ÏPermanent permanent = game.getPermanent(target.getFirstTarget());°Ïif (permanent != null) {°Ïchosen.add(permanent);°Ï}°Ï}°Ï}°Ïfor (Permanent permanent : game.getBattlefield().getActivePermanents(new FilterCreaturePermanent(), source.getControllerId(), source.getSourceId(), game)) {°Ïif (!chosen.contains(permanent)) {°Ïpermanent.destroy(source.getSourceId(), game, false);°Ï}°Ï}°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï@Override°Ïpublic DivineReckoningEffect copy() {°Ïreturn new DivineReckoningEffect(this);°Ï}°Ï}°Ï
