public class HereticsPunishment extends CardImpl {°Ïpublic HereticsPunishment(UUID ownerId) {°Ïsuper(ownerId, 147, "Heretic's Punishment", Rarity.RARE, new CardType[]{CardType.ENCHANTMENT}, "{4}{R}");°Ïthis.expansionSetCode = "ISD";°ÏAbility ability = new SimpleActivatedAbility(Zone.BATTLEFIELD, new HereticsPunishmentEffect(), new ManaCostsImpl("{3}{R}"));°Ïability.addTarget(new TargetCreatureOrPlayer());°Ïthis.addAbility(ability);°Ï}°Ïpublic HereticsPunishment(final HereticsPunishment card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic HereticsPunishment copy() {°Ïreturn new HereticsPunishment(this);°Ï}°Ï}°Ïclass HereticsPunishmentEffect extends OneShotEffect {°Ïpublic HereticsPunishmentEffect() {°Ïsuper(Outcome.Damage);°ÏstaticText = "Choose target creature or player, then put the top three cards of your library into your graveyard. {this} deals damage to that creature or player equal to the highest converted mana cost among those cards";°Ï}°Ïpublic HereticsPunishmentEffect(final HereticsPunishmentEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPlayer controller = game.getPlayer(source.getControllerId());°Ïif (controller != null) {°Ïint maxCost = 0;°ÏSet<Card> cardList = controller.getLibrary().getTopCards(game, 3);°Ïfor (Card card : cardList) {°Ïint test = card.getManaCost().convertedManaCost();°Ïif (test > maxCost) {°ÏmaxCost = test;°Ï}°Ï}°Ïcontroller.moveCards(cardList, Zone.LIBRARY, Zone.GRAVEYARD, source, game);°ÏPermanent permanent = game.getPermanent(targetPointer.getFirst(game, source));°Ïif (permanent != null) {°Ïpermanent.damage(maxCost, source.getSourceId(), game, false, true);°Ïreturn true;°Ï}°ÏPlayer targetPlayer = game.getPlayer(targetPointer.getFirst(game, source));°Ïif (targetPlayer != null) {°ÏtargetPlayer.damage(maxCost, source.getSourceId(), game, false, true);°Ïreturn true;°Ï}°Ï}°Ïreturn false;°Ï}°Ï@Override°Ïpublic HereticsPunishmentEffect copy() {°Ïreturn new HereticsPunishmentEffect(this);°Ï}°Ï}°Ï
