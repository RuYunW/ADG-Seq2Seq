public class UnbreathingHorde extends CardImpl {°Ïpublic UnbreathingHorde(UUID ownerId) {°Ïsuper(ownerId, 121, "Unbreathing Horde", Rarity.RARE, new CardType[]{CardType.CREATURE}, "{2}{B}");°Ïthis.expansionSetCode = "ISD";°Ïthis.subtype.add("Zombie");°Ïthis.power = new MageInt(0);°Ïthis.toughness = new MageInt(0);°Ïthis.addAbility(new EntersBattlefieldAbility(new UnbreathingHordeEffect1(), "with a +1/+1 counter on it for each other Zombie you control and each Zombie card in your graveyard"));°Ïthis.addAbility(new SimpleStaticAbility(Zone.BATTLEFIELD, new UnbreathingHordeEffect2()));°Ï}°Ïpublic UnbreathingHorde(final UnbreathingHorde card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic UnbreathingHorde copy() {°Ïreturn new UnbreathingHorde(this);°Ï}°Ï}°Ïclass UnbreathingHordeEffect1 extends OneShotEffect {°Ïprivate static final FilterCreaturePermanent filter1 = new FilterCreaturePermanent();°Ïprivate static final FilterCreatureCard filter2 = new FilterCreatureCard();°Ïstatic {°Ïfilter1.add(new SubtypePredicate("Zombie"));°Ïfilter2.add(new SubtypePredicate("Zombie"));°Ï}°Ïpublic UnbreathingHordeEffect1() {°Ïsuper(Outcome.BoostCreature);°ÏstaticText = "{this} enters the battlefield with a +1/+1 counter on it for each other Zombie you control and each Zombie card in your graveyard";°Ï}°Ïpublic UnbreathingHordeEffect1(final UnbreathingHordeEffect1 effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPlayer player = game.getPlayer(source.getControllerId());°ÏPermanent permanent = game.getPermanentEntering(source.getSourceId());°Ïif (permanent != null && player != null) {°Ïint amount = game.getBattlefield().countAll(filter1, source.getControllerId(), game) - 1;°Ïamount += player.getGraveyard().count(filter2, game);°Ïif (amount > 0) {°Ïpermanent.addCounters(CounterType.P1P1.createInstance(amount), game);°Ï}°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï@Override°Ïpublic UnbreathingHordeEffect1 copy() {°Ïreturn new UnbreathingHordeEffect1(this);°Ï}°Ï}°Ïclass UnbreathingHordeEffect2 extends PreventionEffectImpl {°Ïpublic UnbreathingHordeEffect2() {°Ïsuper(Duration.WhileOnBattlefield);°Ï}°Ïpublic UnbreathingHordeEffect2(final UnbreathingHordeEffect2 effect) {°Ïsuper(effect);°ÏstaticText = "If damage would be dealt to {this}, prevent that damage and remove a +1/+1 counter from it";°Ï}°Ï@Override°Ïpublic UnbreathingHordeEffect2 copy() {°Ïreturn new UnbreathingHordeEffect2(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°Ïreturn true;°Ï}°Ï@Override°Ïpublic boolean replaceEvent(GameEvent event, Ability source, Game game) {°Ïboolean retValue = false;°ÏGameEvent preventEvent = new GameEvent(GameEvent.EventType.PREVENT_DAMAGE, source.getFirstTarget(), source.getSourceId(), source.getControllerId(), event.getAmount(), false);°Ïint damage = event.getAmount();°Ïif (!game.replaceEvent(preventEvent)) {°Ïevent.setAmount(0);°Ïgame.fireEvent(GameEvent.getEvent(GameEvent.EventType.PREVENTED_DAMAGE, source.getFirstTarget(), source.getSourceId(), source.getControllerId(), damage));°ÏretValue = true;°Ï}°ÏPermanent permanent = game.getPermanent(source.getSourceId());°Ïif (permanent != null) {°Ïpermanent.removeCounters(CounterType.P1P1.createInstance(), game);°Ï}°Ïreturn retValue;°Ï}°Ï@Override°Ïpublic boolean applies(GameEvent event, Ability source, Game game) {°Ïif (super.applies(event, source, game)) {°Ïif (event.getTargetId().equals(source.getSourceId())) {°Ïreturn true;°Ï}°Ï}°Ïreturn false;°Ï}°Ï}°Ï
