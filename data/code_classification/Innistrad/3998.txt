public class SnapcasterMage extends CardImpl {°Ïprivate static final FilterCard filter = new FilterCard("instant or sorcery card in your graveyard");°Ïstatic {°Ïfilter.add(Predicates.or(°Ïnew CardTypePredicate(CardType.INSTANT),°Ïnew CardTypePredicate(CardType.SORCERY)));°Ï}°Ïpublic SnapcasterMage(UUID ownerId) {°Ïsuper(ownerId, 78, "Snapcaster Mage", Rarity.RARE, new CardType[]{CardType.CREATURE}, "{1}{U}");°Ïthis.expansionSetCode = "ISD";°Ïthis.subtype.add("Human");°Ïthis.subtype.add("Wizard");°Ïthis.power = new MageInt(2);°Ïthis.toughness = new MageInt(1);°Ïthis.addAbility(FlashAbility.getInstance());°ÏAbility ability = new EntersBattlefieldTriggeredAbility(new SnapcasterMageEffect());°Ïability.addTarget(new TargetCardInYourGraveyard(filter));°Ïthis.addAbility(ability);°Ï}°Ïpublic SnapcasterMage(final SnapcasterMage card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic SnapcasterMage copy() {°Ïreturn new SnapcasterMage(this);°Ï}°Ï}°Ïclass SnapcasterMageEffect extends ContinuousEffectImpl {°Ïpublic SnapcasterMageEffect() {°Ïsuper(Duration.EndOfTurn, Layer.AbilityAddingRemovingEffects_6, SubLayer.NA, Outcome.AddAbility);°Ïthis.staticText = "target instant or sorcery card in your graveyard gains flashback until end of turn. The flashback cost is equal to its mana cost";°Ï}°Ïpublic SnapcasterMageEffect(final SnapcasterMageEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic SnapcasterMageEffect copy() {°Ïreturn new SnapcasterMageEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏCard card = game.getCard(targetPointer.getFirst(game, source));°Ïif (card != null) {°ÏFlashbackAbility ability;°Ïif (card.getCardType().contains(CardType.INSTANT)) {°Ïability = new FlashbackAbility(card.getManaCost(), TimingRule.INSTANT);°Ï}°Ïelse {°Ïability = new FlashbackAbility(card.getManaCost(), TimingRule.SORCERY);°Ï}°Ïability.setSourceId(card.getId());°Ïability.setControllerId(card.getOwnerId());°Ïgame.getState().addOtherAbility(card, ability);°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ï
