public class SpellSyphon extends CardImpl {°Ïpublic SpellSyphon(UUID ownerId) {°Ïsuper(ownerId, 52, "Spell Syphon", Rarity.COMMON, new CardType[]{CardType.INSTANT}, "{1}{U}");°Ïthis.expansionSetCode = "SHM";°Ïthis.getSpellAbility().addEffect(new SpellSyphonEffect());°Ïthis.getSpellAbility().addTarget(new TargetSpell());°Ï}°Ïpublic SpellSyphon(final SpellSyphon card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic SpellSyphon copy() {°Ïreturn new SpellSyphon(this);°Ï}°Ï}°Ïclass SpellSyphonEffect extends OneShotEffect {°Ïprivate static final FilterPermanent filter = new FilterPermanent("blue permanent you control");°Ïstatic {°Ïfilter.add(new ColorPredicate(ObjectColor.BLUE));°Ïfilter.add(new ControllerPredicate(TargetController.YOU));°Ï}°Ïpublic SpellSyphonEffect() {°Ïsuper(Outcome.Detriment);°Ï}°Ïpublic SpellSyphonEffect(final SpellSyphonEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic SpellSyphonEffect copy() {°Ïreturn new SpellSyphonEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏStackObject spell = game.getStack().getStackObject(targetPointer.getFirst(game, source));°Ïif (spell != null) {°ÏPlayer player = game.getPlayer(spell.getControllerId());°ÏPlayer controller = game.getPlayer(source.getControllerId());°Ïif (player != null && controller != null) {°Ïint amount = game.getBattlefield().count(filter, source.getSourceId(), controller.getId(), game);°Ïif (amount == 0) {°Ïgame.informPlayers("Spell Syphon: no blue permanents in controller's battlefield.");°Ï} else {°ÏGenericManaCost cost = new GenericManaCost(amount);°Ïif (!cost.pay(source, game, spell.getControllerId(), spell.getControllerId(), false)) {°Ïgame.informPlayers("Spell Syphon: cost wasn't payed - countering target spell.");°Ïreturn game.getStack().counter(source.getFirstTarget(), source.getSourceId(), game);°Ï}°Ï}°Ï}°Ï}°Ïreturn false;°Ï}°Ï@Override°Ïpublic String getText(Mode mode) {°Ïreturn "Counter target spell unless its controller pays {1} for each blue permanent you control";°Ï}°Ï}°Ï
