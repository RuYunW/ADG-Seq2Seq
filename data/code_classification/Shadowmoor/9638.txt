public class TwilightShepherd extends CardImpl {°Ïpublic TwilightShepherd(UUID ownerId) {°Ïsuper(ownerId, 25, "Twilight Shepherd", Rarity.RARE, new CardType[]{CardType.CREATURE}, "{3}{W}{W}{W}");°Ïthis.expansionSetCode = "SHM";°Ïthis.subtype.add("Angel");°Ïthis.power = new MageInt(5);°Ïthis.toughness = new MageInt(5);°Ïthis.addAbility(FlyingAbility.getInstance());°Ïthis.addAbility(VigilanceAbility.getInstance());°Ïthis.addAbility(new EntersBattlefieldTriggeredAbility(new TwilightShepherdEffect(), false), new CardsPutIntoGraveyardWatcher());°Ïthis.addAbility(new PersistAbility());°Ï}°Ïpublic TwilightShepherd(final TwilightShepherd card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic TwilightShepherd copy() {°Ïreturn new TwilightShepherd(this);°Ï}°Ï}°Ïclass TwilightShepherdEffect extends OneShotEffect {°Ïboolean applied = false;°Ïpublic TwilightShepherdEffect() {°Ïsuper(Outcome.ReturnToHand);°Ïthis.staticText = "return to your hand all cards in your graveyard that were put there from the battlefield this turn";°Ï}°Ïpublic TwilightShepherdEffect(final TwilightShepherdEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic TwilightShepherdEffect copy() {°Ïreturn new TwilightShepherdEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏCardsPutIntoGraveyardWatcher watcher = (CardsPutIntoGraveyardWatcher) game.getState().getWatchers().get("CardsPutIntoGraveyardWatcher");°ÏPlayer controller = game.getPlayer(source.getControllerId());°Ïif (controller != null && watcher != null) {°ÏSet<MageObjectReference> cardsInGraveyard = watcher.getCardsPutToGraveyardFromBattlefield();°ÏCards cardsToHand = new CardsImpl();°Ïfor (MageObjectReference mor : cardsInGraveyard) {°Ïif (game.getState().getZoneChangeCounter(mor.getSourceId()) == mor.getZoneChangeCounter()) {°ÏCard card = game.getCard(mor.getSourceId());°Ïif (card != null°Ï&& card.getOwnerId().equals(source.getControllerId())) {°ÏcardsToHand.add(card);°Ï}°Ï}°Ï}°Ïcontroller.moveCards(cardsToHand, Zone.GRAVEYARD, Zone.HAND, source, game);°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ï
