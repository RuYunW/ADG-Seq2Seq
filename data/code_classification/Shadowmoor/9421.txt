public class AdviceFromTheFae extends CardImpl {°Ïpublic AdviceFromTheFae(UUID ownerId) {°Ïsuper(ownerId, 28, "Advice from the Fae", Rarity.UNCOMMON, new CardType[]{CardType.SORCERY}, "{2/U}{2/U}{2/U}");°Ïthis.expansionSetCode = "SHM";°Ïthis.getSpellAbility().addEffect(new AdviceFromTheFaeEffect());°Ï}°Ïpublic AdviceFromTheFae(final AdviceFromTheFae card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic AdviceFromTheFae copy() {°Ïreturn new AdviceFromTheFae(this);°Ï}°Ï}°Ïclass AdviceFromTheFaeEffect extends OneShotEffect {°Ïpublic AdviceFromTheFaeEffect() {°Ïsuper(Outcome.DrawCard);°Ïthis.staticText = "Look at the top five cards of your library. If you control more creatures than each other player, put two of those cards into your hand. Otherwise, put one of them into your hand. Then put the rest on the bottom of your library in any order";°Ï}°Ïpublic AdviceFromTheFaeEffect(final AdviceFromTheFaeEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic AdviceFromTheFaeEffect copy() {°Ïreturn new AdviceFromTheFaeEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPlayer controller = game.getPlayer(source.getControllerId());°ÏMageObject mageObject = game.getObject(source.getSourceId());°Ïif (controller != null) {°ÏSet<Card> topCards = controller.getLibrary().getTopCards(game, 5);°ÏCards cardsFromLibrary = new CardsImpl();°Ïfor (Card card : topCards) {°ÏcardsFromLibrary.add(card);°Ï}°Ïcontroller.lookAtCards(mageObject.getIdName(), cardsFromLibrary, game);°Ïint max = 0;°Ïfor (UUID playerId : game.getState().getPlayersInRange(controller.getId(), game)) {°ÏFilterCreaturePermanent filter = new FilterCreaturePermanent();°Ïfilter.add(new ControllerIdPredicate(playerId));°Ïif (playerId != controller.getId()) {°Ïif (max < game.getBattlefield().countAll(filter, playerId, game)) {°Ïmax = game.getBattlefield().countAll(filter, playerId, game);°Ï}°Ï}°Ï}°Ïboolean moreCreatures = game.getBattlefield().countAll(new FilterControlledCreaturePermanent(), controller.getId(), game) > max;°ÏTargetCard target = new TargetCard(moreCreatures ? 2 : 1, Zone.LIBRARY, new FilterCard());°Ïif (controller.choose(Outcome.DrawCard, cardsFromLibrary, target, game)) {°ÏcardsFromLibrary.removeAll(target.getTargets());°Ïcontroller.moveCards(new CardsImpl(target.getTargets()), null, Zone.HAND, source, game);°Ï}°Ïcontroller.putCardsOnBottomOfLibrary(cardsFromLibrary, game, source, true);°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ï
