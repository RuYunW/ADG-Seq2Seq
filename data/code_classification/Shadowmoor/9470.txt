public class ElementalMastery extends CardImpl {°Ïpublic ElementalMastery(UUID ownerId) {°Ïsuper(ownerId, 90, "Elemental Mastery", Rarity.RARE, new CardType[]{CardType.ENCHANTMENT}, "{3}{R}");°Ïthis.expansionSetCode = "SHM";°Ïthis.subtype.add("Aura");°ÏTargetPermanent auraTarget = new TargetCreaturePermanent();°Ïthis.getSpellAbility().addTarget(auraTarget);°Ïthis.getSpellAbility().addEffect(new AttachEffect(Outcome.AddAbility));°ÏAbility ability = new EnchantAbility(auraTarget.getTargetName());°Ïthis.addAbility(ability);°ÏAbility ability2 = new SimpleActivatedAbility(Zone.BATTLEFIELD, new ElementalMasteryEffect(), new TapSourceCost());°Ïthis.addAbility(new SimpleStaticAbility(Zone.BATTLEFIELD, new GainAbilityAttachedEffect(ability2, AttachmentType.AURA)));°Ï}°Ïpublic ElementalMastery(final ElementalMastery card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic ElementalMastery copy() {°Ïreturn new ElementalMastery(this);°Ï}°Ï}°Ïclass ElementalMasteryEffect extends OneShotEffect {°Ïpublic ElementalMasteryEffect() {°Ïsuper(Outcome.Benefit);°ÏstaticText = "Put X 1/1 red Elemental creature tokens with haste onto the battlefield, where X is this creature's power. Exile them at the beginning of the next end step";°Ï}°Ïpublic ElementalMasteryEffect(final ElementalMasteryEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic ElementalMasteryEffect copy() {°Ïreturn new ElementalMasteryEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPermanent creatureAttached = game.getPermanent(source.getSourceId());°Ïif (creatureAttached != null) {°Ïint power = creatureAttached.getPower().getValue();°Ïif (power > 0) {°ÏElementalToken token = new ElementalToken();°Ïtoken.putOntoBattlefield(power, game, creatureAttached.getId(), creatureAttached.getControllerId());°Ïfor (UUID tokenId : token.getLastAddedTokenIds()) {°ÏPermanent tokenPermanent = game.getPermanent(tokenId);°Ïif (tokenPermanent != null) {°ÏExileTargetEffect exileEffect = new ExileTargetEffect();°ÏexileEffect.setTargetPointer(new FixedTarget(tokenPermanent, game));°Ïgame.addDelayedTriggeredAbility(new AtTheBeginOfNextEndStepDelayedTriggeredAbility(exileEffect), source);°Ï}°Ï}°Ï}°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ïclass ElementalToken extends Token {°Ïpublic ElementalToken() {°Ïsuper("Elemental", "1/1 red Elemental creature token with haste");°ÏcardType.add(CardType.CREATURE);°Ïsubtype.add("Elemental");°Ïcolor.setRed(true);°Ïpower = new MageInt(1);°Ïtoughness = new MageInt(1);°ÏaddAbility(HasteAbility.getInstance());°Ï}°Ï}°Ï
