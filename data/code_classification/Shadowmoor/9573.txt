public class PrisonTerm extends CardImpl {°Ïprivate static final FilterPermanent filter = new FilterCreaturePermanent("a creature");°Ïstatic {°Ïfilter.add(new ControllerPredicate(TargetController.OPPONENT));°Ï}°Ïpublic PrisonTerm(UUID ownerId) {°Ïsuper(ownerId, 18, "Prison Term", Rarity.UNCOMMON, new CardType[]{CardType.ENCHANTMENT}, "{1}{W}{W}");°Ïthis.expansionSetCode = "SHM";°Ïthis.subtype.add("Aura");°ÏTargetPermanent auraTarget = new TargetCreaturePermanent();°Ïthis.getSpellAbility().addTarget(auraTarget);°Ïthis.getSpellAbility().addEffect(new AttachEffect(Outcome.Detriment));°ÏAbility ability = new EnchantAbility(auraTarget.getTargetName());°Ïthis.addAbility(ability);°Ïthis.addAbility(new SimpleStaticAbility(Zone.BATTLEFIELD, new CantBlockAttackActivateAttachedEffect()));°Ïthis.addAbility(new EntersBattlefieldAllTriggeredAbility(°ÏZone.BATTLEFIELD, new PrisonTermEffect(), filter, true, SetTargetPointer.PERMANENT, "Whenever a creature enters the battlefield under an opponent's control, you may attach Prison Term to that creature."));°Ï}°Ïpublic PrisonTerm(final PrisonTerm card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic PrisonTerm copy() {°Ïreturn new PrisonTerm(this);°Ï}°Ï}°Ïclass PrisonTermEffect extends OneShotEffect {°Ïpublic PrisonTermEffect() {°Ïsuper(Outcome.Detriment);°Ï}°Ïpublic PrisonTermEffect(final PrisonTermEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPlayer you = game.getPlayer(source.getControllerId());°ÏPermanent opponentCreature = game.getPermanent(getTargetPointer().getFirst(game, source));°ÏPermanent prisonTerm = game.getPermanent(source.getSourceId());°Ïif (you != null && opponentCreature != null && prisonTerm != null) {°ÏPermanent oldCreature = game.getPermanent(prisonTerm.getAttachedTo());°Ïif (oldCreature == null) {°Ïreturn false;°Ï}°Ïif (oldCreature.removeAttachment(prisonTerm.getId(), game)) {°Ïreturn opponentCreature.addAttachment(prisonTerm.getId(), game);°Ï}°Ï}°Ïreturn false;°Ï}°Ï@Override°Ïpublic PrisonTermEffect copy() {°Ïreturn new PrisonTermEffect(this);°Ï}°Ï}°Ï
