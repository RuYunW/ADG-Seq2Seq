public class WoundReflection extends CardImpl {¡ìpublic WoundReflection(UUID ownerId) {¡ìsuper(ownerId, 81, "Wound Reflection", Rarity.RARE, new CardType[]{CardType.ENCHANTMENT}, "{5}{B}");¡ìthis.expansionSetCode = "SHM";¡ìthis.addAbility(new BeginningOfEndStepTriggeredAbility(new WoundReflectionEffect(), TargetController.ANY, false));¡ì}¡ìpublic WoundReflection(final WoundReflection card) {¡ìsuper(card);¡ì}¡ì@Override¡ìpublic WoundReflection copy() {¡ìreturn new WoundReflection(this);¡ì}¡ì}¡ìclass WoundReflectionEffect extends OneShotEffect {¡ìpublic WoundReflectionEffect() {¡ìsuper(Outcome.LoseLife);¡ìthis.staticText = "each opponent loses life equal to the life he or she lost this turn";¡ì}¡ìpublic WoundReflectionEffect(final WoundReflectionEffect effect) {¡ìsuper(effect);¡ì}¡ì@Override¡ìpublic WoundReflectionEffect copy() {¡ìreturn new WoundReflectionEffect(this);¡ì}¡ì@Override¡ìpublic boolean apply(Game game, Ability source) {¡ìPlayer controller = game.getPlayer(source.getControllerId());¡ìPlayerLostLifeWatcher watcher = (PlayerLostLifeWatcher) game.getState().getWatchers().get("PlayerLostLifeWatcher");¡ìif (controller != null && watcher != null) {¡ìfor (UUID playerId : game.getOpponents(controller.getId())) {¡ìPlayer opponent = game.getPlayer(playerId);¡ìif (opponent != null) {¡ìint lifeLost = watcher.getLiveLost(playerId);¡ìif (lifeLost > 0) {¡ìopponent.loseLife(lifeLost, game);¡ì}¡ì}¡ì}¡ìreturn true;¡ì}¡ìreturn false;¡ì}¡ì}¡ì
