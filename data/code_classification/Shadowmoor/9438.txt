public class BlowflyInfestation extends CardImpl {°Ïprivate static final String rule = "Whenever a creature dies, if it had a -1/-1 counter on it, put a -1/-1 counter on target creature.";°Ïpublic BlowflyInfestation(UUID ownerId) {°Ïsuper(ownerId, 58, "Blowfly Infestation", Rarity.UNCOMMON, new CardType[]{CardType.ENCHANTMENT}, "{2}{B}");°Ïthis.expansionSetCode = "SHM";°ÏEffect effect = new BlowflyInfestationEffect();°ÏTriggeredAbility triggeredAbility = new DiesCreatureTriggeredAbility(effect, false, false, true);°ÏtriggeredAbility.addTarget(new TargetCreaturePermanent());°ÏCondition condition = new BlowflyInfestationCondition();°Ïthis.addAbility(new ConditionalTriggeredAbility(triggeredAbility, condition, rule));°Ï}°Ïpublic BlowflyInfestation(final BlowflyInfestation card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic BlowflyInfestation copy() {°Ïreturn new BlowflyInfestation(this);°Ï}°Ï}°Ïclass BlowflyInfestationCondition implements Condition {°Ïprivate static Permanent permanent;°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°Ïfor (Effect effect : source.getEffects()) {°Ïif (effect.getTargetPointer().getFirst(game, source) != null) {°Ïpermanent = game.getPermanentOrLKIBattlefield(effect.getTargetPointer().getFirst(game, source));°Ï}°Ï}°Ïif (permanent != null) {°Ïreturn permanent.getCounters().containsKey(CounterType.M1M1);°Ï}°Ïreturn false;°Ï}°Ï}°Ïclass BlowflyInfestationEffect extends OneShotEffect {°Ïpublic BlowflyInfestationEffect() {°Ïsuper(Outcome.Detriment);°Ï}°Ïpublic BlowflyInfestationEffect(BlowflyInfestationEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPermanent creature = game.getPermanent(source.getFirstTarget());°Ïif (creature != null) {°Ïcreature.addCounters(CounterType.M1M1.createInstance(), game);°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï@Override°Ïpublic BlowflyInfestationEffect copy() {°Ïreturn new BlowflyInfestationEffect(this);°Ï}°Ï}°Ï
