public class OrzhovCharm extends CardImpl {°Ïprivate static final FilterCard filter = new FilterCreatureCard("creature card with converted mana cost 1 or less from your graveyard");°Ïstatic {°Ïfilter.add(new ConvertedManaCostPredicate(Filter.ComparisonType.LessThan, 2));°Ï}°Ïpublic OrzhovCharm(UUID ownerId) {°Ïsuper(ownerId, 185, "Orzhov Charm", Rarity.UNCOMMON, new CardType[]{CardType.INSTANT}, "{W}{B}");°Ïthis.expansionSetCode = "GTC";°Ïthis.getSpellAbility().addEffect(new OrzhovCharmReturnToHandEffect());°Ïthis.getSpellAbility().addTarget(new TargetControlledCreaturePermanent());°ÏMode mode = new Mode();°Ïmode.getEffects().add(new OrzhovCharmDestroyAndLoseLifeEffect());°Ïmode.getTargets().add(new TargetCreaturePermanent());°Ïthis.getSpellAbility().addMode(mode);°ÏMode mode2 = new Mode();°Ïmode2.getEffects().add(new ReturnFromGraveyardToBattlefieldTargetEffect());°Ïmode2.getTargets().add(new TargetCardInYourGraveyard(filter));°Ïthis.getSpellAbility().addMode(mode2);°Ï}°Ïpublic OrzhovCharm(final OrzhovCharm card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic OrzhovCharm copy() {°Ïreturn new OrzhovCharm(this);°Ï}°Ï}°Ïclass OrzhovCharmReturnToHandEffect extends OneShotEffect {°Ïpublic OrzhovCharmReturnToHandEffect() {°Ïsuper(Outcome.ReturnToHand);°Ïthis.staticText = "Return target creature you control and all Auras you control attached to it to their owner's hand";°Ï}°Ïpublic OrzhovCharmReturnToHandEffect(final OrzhovCharmReturnToHandEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic OrzhovCharmReturnToHandEffect copy() {°Ïreturn new OrzhovCharmReturnToHandEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPermanent target = game.getPermanent(getTargetPointer().getFirst(game, source));°Ïif (target != null) {°ÏLinkedList<UUID> attachments = new LinkedList<>();°Ïattachments.addAll(target.getAttachments());°Ïfor (UUID attachmentId : attachments) {°ÏPermanent attachment = game.getPermanent(attachmentId);°Ïif (attachment != null && attachment.getControllerId().equals(source.getControllerId())°Ï&& attachment.getSubtype().contains("Aura")) {°Ïattachment.moveToZone(Zone.HAND, source.getSourceId(), game, false);°Ï}°Ï}°Ïif (target.getControllerId().equals(source.getControllerId())) {°Ïtarget.moveToZone(Zone.HAND, source.getSourceId(), game, false);°Ï}°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ïclass OrzhovCharmDestroyAndLoseLifeEffect extends OneShotEffect {°Ïpublic OrzhovCharmDestroyAndLoseLifeEffect() {°Ïsuper(Outcome.DestroyPermanent);°Ïthis.staticText = "destroy target creature and you lose life equal to its toughness";°Ï}°Ïpublic OrzhovCharmDestroyAndLoseLifeEffect(final OrzhovCharmDestroyAndLoseLifeEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic OrzhovCharmDestroyAndLoseLifeEffect copy() {°Ïreturn new OrzhovCharmDestroyAndLoseLifeEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPermanent target = game.getPermanent(getTargetPointer().getFirst(game, source));°ÏPlayer controller = game.getPlayer(source.getControllerId());°Ïif (target != null && controller != null) {°Ïint toughness = target.getToughness().getValue();°Ïtarget.destroy(source.getSourceId(), game, false);°Ïif (toughness > 0) {°Ïcontroller.loseLife(toughness, game);°Ï}°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ï
