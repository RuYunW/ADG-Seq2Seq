public class FiveAlarmFire extends CardImpl {°Ïpublic FiveAlarmFire(UUID ownerId) {°Ïsuper(ownerId, 91, "Five-Alarm Fire", Rarity.RARE, new CardType[]{CardType.ENCHANTMENT}, "{1}{R}{R}");°Ïthis.expansionSetCode = "GTC";°Ïthis.addAbility(new FiveAlarmFireTriggeredAbility());°ÏAbility ability = new SimpleActivatedAbility(Zone.BATTLEFIELD, new DamageTargetEffect(5), new RemoveCountersSourceCost(CounterType.BLAZE.createInstance(5)));°Ïability.addTarget(new TargetCreatureOrPlayer());°Ïthis.addAbility(ability);°Ï}°Ïpublic FiveAlarmFire(final FiveAlarmFire card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic FiveAlarmFire copy() {°Ïreturn new FiveAlarmFire(this);°Ï}°Ï}°Ïclass FiveAlarmFireTriggeredAbility extends TriggeredAbilityImpl {°ÏHashSet<UUID> triggeringCreatures = new HashSet<>();°Ïprivate static final FilterControlledCreaturePermanent filter = new FilterControlledCreaturePermanent();°Ïpublic FiveAlarmFireTriggeredAbility() {°Ïsuper(Zone.BATTLEFIELD, new AddCountersSourceEffect(CounterType.BLAZE.createInstance()), false);°Ï}°Ïpublic FiveAlarmFireTriggeredAbility(final FiveAlarmFireTriggeredAbility ability) {°Ïsuper(ability);°ÏtriggeringCreatures.addAll(ability.triggeringCreatures);°Ï}°Ï@Override°Ïpublic FiveAlarmFireTriggeredAbility copy() {°Ïreturn new FiveAlarmFireTriggeredAbility(this);°Ï}°Ï@Override°Ïpublic boolean checkEventType(GameEvent event, Game game) {°Ïreturn event.getType() == EventType.DAMAGED_CREATURE°Ï|| event.getType() == EventType.DAMAGED_PLANESWALKER°Ï|| event.getType() == EventType.DAMAGED_PLAYER°Ï|| event.getType() == EventType.COMBAT_DAMAGE_STEP_PRE;°Ï}°Ï@Override°Ïpublic boolean checkTrigger(GameEvent event, Game game) {°Ïif (event.getType() == EventType.DAMAGED_CREATURE°Ï|| event.getType() == EventType.DAMAGED_PLANESWALKER°Ï|| event.getType() == EventType.DAMAGED_PLAYER) {°Ïif (((DamagedEvent) event).isCombatDamage() && !triggeringCreatures.contains(event.getSourceId())) {°ÏPermanent permanent = game.getPermanent(event.getSourceId());°Ïif (permanent != null && filter.match(permanent, sourceId, controllerId, game)) {°ÏtriggeringCreatures.add(event.getSourceId());°Ïreturn true;°Ï}°Ï}°Ï}°Ïif (event.getType() == EventType.COMBAT_DAMAGE_STEP_PRE) {°ÏtriggeringCreatures.clear();°Ï}°Ïreturn false;°Ï}°Ï@Override°Ïpublic String getRule() {°Ïreturn "Whenever a creature you control deals combat damage, " + super.getRule();°Ï}°Ï}°Ï
