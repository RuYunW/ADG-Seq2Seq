public class OathkeeperTakenosDaisho extends CardImpl {°Ïprivate static final FilterCreaturePermanent filter = new FilterCreaturePermanent("it's a Samurai card");°Ïstatic {°Ïfilter.add(new SubtypePredicate("Samurai"));°Ï}°Ïpublic OathkeeperTakenosDaisho(UUID ownerId) {°Ïsuper(ownerId, 265, "Oathkeeper, Takeno's Daisho", Rarity.RARE, new CardType[]{CardType.ARTIFACT}, "{3}");°Ïthis.expansionSetCode = "CHK";°Ïthis.supertype.add("Legendary");°Ïthis.subtype.add("Equipment");°Ïthis.addAbility(new SimpleStaticAbility(Zone.BATTLEFIELD, new BoostEquippedEffect(3,1, Duration.WhileOnBattlefield)));°Ïthis.addAbility(new ConditionalTriggeredAbility(°Ïnew DiesAttachedTriggeredAbility(new ReturnToBattlefieldUnderYourControlAttachedEffect(),"equipped creature", false),°Ïnew OathkeeperEquippedMatchesFilterCondition(filter),°Ï""));°Ïthis.addAbility(new PutIntoGraveFromBattlefieldSourceTriggeredAbility(new ExileEquippedEffect()));°Ïthis.addAbility(new EquipAbility( Outcome.BoostCreature, new ManaCostsImpl("{2}")));°Ï}°Ïpublic OathkeeperTakenosDaisho(final OathkeeperTakenosDaisho card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic OathkeeperTakenosDaisho copy() {°Ïreturn new OathkeeperTakenosDaisho(this);°Ï}°Ï}°Ïclass ExileEquippedEffect extends OneShotEffect {°Ïpublic ExileEquippedEffect() {°Ïsuper(Outcome.Exile);°ÏstaticText = "exile equipped creature";°Ï}°Ïpublic ExileEquippedEffect(final ExileEquippedEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic ExileEquippedEffect copy() {°Ïreturn new ExileEquippedEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPermanent equipment = (Permanent) game.getLastKnownInformation(source.getSourceId(), Zone.BATTLEFIELD);°Ïif (equipment != null && equipment.getAttachedTo() != null) {°ÏPermanent creature = game.getPermanent(equipment.getAttachedTo());°Ïif (creature != null) {°Ïreturn creature.moveToExile(null, "", source.getSourceId(), game);°Ï}°Ï}°Ïreturn false;°Ï}°Ï}°Ïclass OathkeeperEquippedMatchesFilterCondition implements Condition {°Ïprivate FilterCreaturePermanent filter;°Ïpublic OathkeeperEquippedMatchesFilterCondition(FilterCreaturePermanent filter) {°Ïthis.filter = filter;°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPermanent permanent = game.getBattlefield().getPermanent(source.getSourceId());°Ïif (permanent == null) {°Ïpermanent = (Permanent) game.getLastKnownInformation(source.getSourceId(), Zone.BATTLEFIELD);°Ï}°Ïif (permanent != null) {°ÏPermanent attachedTo = null;°Ïif (permanent.getAttachedTo() != null) {°ÏattachedTo = game.getBattlefield().getPermanent(permanent.getAttachedTo());°Ïif (attachedTo == null) {°ÏattachedTo = (Permanent) game.getLastKnownInformation(permanent.getAttachedTo(), Zone.BATTLEFIELD);°Ï}°Ï}°Ïif (attachedTo == null) {°Ïfor (Effect effect :source.getEffects()) {°ÏattachedTo = (Permanent) effect.getValue("attachedTo");°Ï}°Ï}°Ïif (attachedTo != null) {°Ïif (filter.match(attachedTo, attachedTo.getId(),attachedTo.getControllerId(), game)) {°Ïreturn true;°Ï}°Ï}°Ï}°Ïreturn false;°Ï}°Ï}°Ï
