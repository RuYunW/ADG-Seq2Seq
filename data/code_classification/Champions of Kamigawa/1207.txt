public class ReverseTheSands extends CardImpl {°Ïpublic ReverseTheSands(UUID ownerId) {°Ïsuper(ownerId, 41, "Reverse the Sands", Rarity.RARE, new CardType[]{CardType.SORCERY}, "{6}{W}{W}");°Ïthis.expansionSetCode = "CHK";°Ïthis.getSpellAbility().addEffect(new ReverseTheSandsEffect());°Ï}°Ïpublic ReverseTheSands(final ReverseTheSands card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic ReverseTheSands copy() {°Ïreturn new ReverseTheSands(this);°Ï}°Ï}°Ïclass ReverseTheSandsEffect extends OneShotEffect {°Ïpublic ReverseTheSandsEffect() {°Ïsuper(Outcome.Benefit);°Ïthis.staticText = "Redistribute any number of players' life totals";°Ï}°Ïpublic ReverseTheSandsEffect(final ReverseTheSandsEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic ReverseTheSandsEffect copy() {°Ïreturn new ReverseTheSandsEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPlayer controller = game.getPlayer(source.getControllerId());°Ïif (controller != null) {°ÏChoice lifeChoice = new ChoiceImpl(true);°ÏSet<String> choices = new HashSet<String>();°Ïfor (UUID playerId : game.getState().getPlayersInRange(controller.getId(), game)) {°ÏPlayer player = game.getPlayer(playerId);°Ïif (player != null) {°Ïchoices.add(new StringBuilder(Integer.toString(player.getLife())).append(" life of ").append(player.getLogName()).toString());°Ï}°Ï}°ÏlifeChoice.setChoices(choices);°Ïfor (UUID playersId : game.getState().getPlayersInRange(controller.getId(), game)) {°ÏPlayer player = game.getPlayer(playersId);°Ïif (player != null) {°ÏString selectedChoice;°Ïif (choices.size() > 1) {°ÏlifeChoice.setMessage("Which players life should get player " + player.getLogName());°Ïcontroller.choose(Outcome.Detriment, lifeChoice, game);°ÏselectedChoice = lifeChoice.getChoice();°Ï} else {°ÏselectedChoice = choices.iterator().next();°Ï}°Ïint index = selectedChoice.indexOf(" ");°Ïif (index > 0) {°ÏString lifeString = selectedChoice.substring(0, index);°Ïint life = Integer.parseInt(lifeString);°Ïplayer.setLife(life, game);°Ïchoices.remove(selectedChoice);°Ïgame.informPlayers(new StringBuilder("Player ").append(player.getLogName()).append(" life set to ").append(life).toString());°Ï}°Ï}°Ï}°Ï}°Ïreturn false;°Ï}°Ï}°Ï
