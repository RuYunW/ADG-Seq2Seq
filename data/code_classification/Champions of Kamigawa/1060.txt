public class CutTheTethers extends CardImpl {°Ïpublic CutTheTethers(UUID ownerId) {°Ïsuper(ownerId, 56, "Cut the Tethers", Rarity.UNCOMMON, new CardType[]{CardType.SORCERY}, "{2}{U}{U}");°Ïthis.expansionSetCode = "CHK";°Ïthis.getSpellAbility().addEffect(new CutTheTethersEffect());°Ï}°Ïpublic CutTheTethers(final CutTheTethers card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic CutTheTethers copy() {°Ïreturn new CutTheTethers(this);°Ï}°Ï}°Ïclass CutTheTethersEffect extends OneShotEffect {°Ïprivate static final FilterCreaturePermanent filter = new FilterCreaturePermanent("Spirit creatures");°Ïstatic {°Ïfilter.add(new SubtypePredicate("Spirit"));°Ï}°Ïpublic CutTheTethersEffect() {°Ïsuper(Outcome.ReturnToHand);°Ïthis.staticText = "For each Spirit, return it to its owner's hand unless that player pays {3}";°Ï}°Ïpublic CutTheTethersEffect(final CutTheTethersEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic CutTheTethersEffect copy() {°Ïreturn new CutTheTethersEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°Ïfor (Permanent creature: game.getState().getBattlefield().getActivePermanents(filter, source.getControllerId(), source.getSourceId(), game)) {°ÏPlayer player = game.getPlayer(creature.getControllerId());°Ïif (player != null) {°Ïboolean paid = false;°Ïif (player.chooseUse(outcome, new StringBuilder("Pay {3} to keep ").append(creature.getName()).append(" on the battlefield?").toString(), source, game)) {°ÏCost cost = new GenericManaCost(3);°Ïif (!cost.pay(source, game, source.getSourceId(), creature.getControllerId(), false, null)) {°Ïpaid = true;°Ï}°Ïif (!paid) {°Ïcreature.moveToZone(Zone.HAND, source.getSourceId(), game, true);°Ï}°Ï}°Ï}°Ï}°Ïreturn true;°Ï}°Ï}°Ï
