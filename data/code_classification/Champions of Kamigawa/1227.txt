public class SiftThroughSands extends CardImpl {°Ïprivate static final String rule = "If you've cast a spell named Peer Through Depths and a spell named Reach Through Mists this turn, you may search your library for a card named The Unspeakable, put it onto the battlefield, then shuffle your library";°Ïprivate static final FilterCreatureCard filter = new FilterCreatureCard("a card named The Unspeakable");°Ïstatic {°Ïfilter.add(new NamePredicate("The Unspeakable"));°Ï}°Ïpublic SiftThroughSands(UUID ownerId) {°Ïsuper(ownerId, 84, "Sift Through Sands", Rarity.COMMON, new CardType[]{CardType.INSTANT}, "{1}{U}{U}");°Ïthis.expansionSetCode = "CHK";°Ïthis.subtype.add("Arcane");°Ïthis.getSpellAbility().addEffect(new DrawCardSourceControllerEffect(2));°ÏEffect effect = new DiscardControllerEffect(1);°Ïeffect.setText(", then discard a card");°Ïthis.getSpellAbility().addEffect(effect);°Ïthis.getSpellAbility().addEffect(new ConditionalOneShotEffect(new SearchLibraryPutInPlayEffect(new TargetCardInLibrary(filter), false, true), new SiftThroughSandsCondition(), rule));°Ïthis.getSpellAbility().addWatcher(new SiftThroughSandsWatcher());°Ï}°Ïpublic SiftThroughSands(final SiftThroughSands card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic SiftThroughSands copy() {°Ïreturn new SiftThroughSands(this);°Ï}°Ï}°Ïclass SiftThroughSandsCondition implements Condition {°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏSiftThroughSandsWatcher watcher = (SiftThroughSandsWatcher) game.getState().getWatchers().get("SiftThroughSandsWatcher", source.getControllerId());°Ïif (watcher != null) {°Ïreturn watcher.conditionMet();°Ï}°Ïreturn false;°Ï}°Ï}°Ïclass SiftThroughSandsWatcher extends Watcher {°Ïboolean castPeerThroughDepths = false;°Ïboolean castReachThroughMists = false;°Ïpublic SiftThroughSandsWatcher() {°Ïsuper("SiftThroughSandsWatcher", WatcherScope.PLAYER);°Ï}°Ïpublic SiftThroughSandsWatcher(final SiftThroughSandsWatcher watcher) {°Ïsuper(watcher);°Ïthis.castPeerThroughDepths = watcher.castPeerThroughDepths;°Ïthis.castReachThroughMists = watcher.castReachThroughMists;°Ï}°Ï@Override°Ïpublic SiftThroughSandsWatcher copy() {°Ïreturn new SiftThroughSandsWatcher(this);°Ï}°Ï@Override°Ïpublic void watch(GameEvent event, Game game) {°Ïif (condition == true) { °Ï
