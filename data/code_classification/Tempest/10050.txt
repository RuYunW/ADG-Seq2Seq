public class EssenceBottle extends CardImpl {°Ïpublic EssenceBottle(UUID ownerId) {°Ïsuper(ownerId, 276, "Essence Bottle", Rarity.UNCOMMON, new CardType[]{CardType.ARTIFACT}, "{2}");°Ïthis.expansionSetCode = "TMP";°ÏSimpleActivatedAbility ability = new SimpleActivatedAbility(Zone.BATTLEFIELD,°Ïnew AddCountersSourceEffect(CounterType.ELIXIR.createInstance()),°Ïnew GenericManaCost(3));°Ïability.addCost(new TapSourceCost());°Ïthis.addAbility(ability);°Ïability = new SimpleActivatedAbility(Zone.BATTLEFIELD, new EssenceBottleEffect(), new TapSourceCost());°Ïability.addCost(new EssenceBottleCost());°Ïthis.addAbility(ability);°Ï}°Ïpublic EssenceBottle(final EssenceBottle card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic EssenceBottle copy() {°Ïreturn new EssenceBottle(this);°Ï}°Ï}°Ïclass EssenceBottleCost extends CostImpl {°Ïprivate int removedCounters;°Ïpublic EssenceBottleCost() {°Ïsuper();°Ïthis.removedCounters = 0;°Ïthis.text = "Remove all elixir counters from {this}";°Ï}°Ïpublic EssenceBottleCost(EssenceBottleCost cost) {°Ïsuper(cost);°Ïthis.removedCounters = cost.removedCounters;°Ï}°Ï@Override°Ïpublic boolean canPay(Ability ability, UUID sourceId, UUID controllerId, Game game) {°Ïreturn true;°Ï}°Ï@Override°Ïpublic boolean pay(Ability ability, Game game, UUID sourceId, UUID controllerId, boolean noMana, Cost costToPay) {°ÏPermanent permanent = game.getPermanent(ability.getSourceId());°Ïif (permanent != null) {°Ïthis.removedCounters = permanent.getCounters().getCount(CounterType.ELIXIR);°Ïif (this.removedCounters > 0) {°Ïpermanent.removeCounters(CounterType.ELIXIR.createInstance(this.removedCounters), game);°Ï}°Ï}°Ïthis.paid = true;°Ïreturn true;°Ï}°Ï@Override°Ïpublic EssenceBottleCost copy() {°Ïreturn new EssenceBottleCost(this);°Ï}°Ïpublic int getRemovedCounters() {°Ïreturn this.removedCounters;°Ï}°Ï}°Ïclass EssenceBottleEffect extends OneShotEffect {°Ïpublic EssenceBottleEffect() {°Ïsuper(Outcome.GainLife);°Ïthis.staticText = "You gain 2 life for each elixir counter removed this way";°Ï}°Ïpublic EssenceBottleEffect(final EssenceBottleEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic EssenceBottleEffect copy() {°Ïreturn new EssenceBottleEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°Ïint countersRemoved = 0;°Ïfor (Cost cost : source.getCosts()) {°Ïif (cost instanceof EssenceBottleCost) {°ÏcountersRemoved = ((EssenceBottleCost) cost).getRemovedCounters();°Ï}°Ï}°ÏPlayer player = game.getPlayer(source.getControllerId());°Ïif (player != null) {°Ïplayer.gainLife(countersRemoved * 2, game);°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ï
