public class CorpseDance extends CardImpl {°Ïpublic CorpseDance(UUID ownerId) {°Ïsuper(ownerId, 10, "Corpse Dance", Rarity.RARE, new CardType[]{CardType.INSTANT}, "{2}{B}");°Ïthis.expansionSetCode = "TMP";°Ïthis.addAbility(new BuybackAbility("{2}"));°Ïthis.getSpellAbility().addEffect(new CorpseDanceEffect());°Ï}°Ïpublic CorpseDance(final CorpseDance card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic CorpseDance copy() {°Ïreturn new CorpseDance(this);°Ï}°Ï}°Ïclass CorpseDanceEffect extends OneShotEffect {°Ïpublic CorpseDanceEffect() {°Ïsuper(Outcome.Benefit);°Ïthis.staticText = "Return the top creature card of your graveyard to the battlefield. That creature gains haste until end of turn. Exile it at the beginning of the next end step";°Ï}°Ïpublic CorpseDanceEffect(final CorpseDanceEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic CorpseDanceEffect copy() {°Ïreturn new CorpseDanceEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPlayer controller = game.getPlayer(source.getControllerId());°Ïif (controller != null) {°ÏCard lastCreatureCard = null;°Ïfor (Card card : controller.getGraveyard().getCards(game)) {°Ïif (card.getCardType().contains(CardType.CREATURE)) {°ÏlastCreatureCard = card;°Ï}°Ï}°Ïif (lastCreatureCard != null) {°Ïif (controller.moveCards(lastCreatureCard, Zone.BATTLEFIELD, source, game)) {°ÏPermanent creature = game.getPermanent(lastCreatureCard.getId());°Ïif (creature != null) {°ÏFixedTarget fixedTarget = new FixedTarget(creature, game);°ÏContinuousEffect hasteEffect = new GainAbilityTargetEffect(HasteAbility.getInstance(), Duration.EndOfTurn);°ÏhasteEffect.setTargetPointer(fixedTarget);°Ïgame.addEffect(hasteEffect, source);°ÏExileTargetEffect exileEffect = new ExileTargetEffect(null, "", Zone.BATTLEFIELD);°ÏexileEffect.setTargetPointer(fixedTarget);°ÏDelayedTriggeredAbility delayedAbility = new AtTheBeginOfNextEndStepDelayedTriggeredAbility(exileEffect);°Ïgame.addDelayedTriggeredAbility(delayedAbility, source);°Ï}°Ï}°Ï}°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ï
