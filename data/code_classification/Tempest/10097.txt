public class LivingDeath extends CardImpl {°Ïpublic LivingDeath(UUID ownerId) {°Ïsuper(ownerId, 36, "Living Death", Rarity.RARE, new CardType[]{CardType.SORCERY}, "{3}{B}{B}");°Ïthis.expansionSetCode = "TMP";°Ïthis.getSpellAbility().addEffect(new LivingDeathEffect());°Ï}°Ïpublic LivingDeath(final LivingDeath card) {°Ïsuper(card);°Ï}°Ï@Override°Ïpublic LivingDeath copy() {°Ïreturn new LivingDeath(this);°Ï}°Ï}°Ïclass LivingDeathEffect extends OneShotEffect {°Ïpublic LivingDeathEffect() {°Ïsuper(Outcome.Benefit);°Ïthis.staticText = "Each player exiles all creature cards from his or her graveyard, then sacrifices all creatures he or she controls, then puts all cards he or she exiled this way onto the battlefield";°Ï}°Ïpublic LivingDeathEffect(final LivingDeathEffect effect) {°Ïsuper(effect);°Ï}°Ï@Override°Ïpublic LivingDeathEffect copy() {°Ïreturn new LivingDeathEffect(this);°Ï}°Ï@Override°Ïpublic boolean apply(Game game, Ability source) {°ÏPlayer controller = game.getPlayer(source.getControllerId());°ÏMageObject sourceObject = game.getObject(source.getSourceId());°Ïif (controller != null && sourceObject != null) {°ÏMap<UUID, Set<Card>> exiledCards = new HashMap<>();°Ïfor (UUID playerId : game.getState().getPlayersInRange(source.getControllerId(), game)) {°ÏPlayer player = game.getPlayer(playerId);°Ïif (player != null) {°ÏSet<Card> cardsPlayer = player.getGraveyard().getCards(new FilterCreatureCard(), game);°Ïif (!cardsPlayer.isEmpty()) {°ÏexiledCards.put(player.getId(), cardsPlayer);°Ïplayer.moveCards(cardsPlayer, Zone.EXILED, source, game);°Ï}°Ï}°Ï}°Ïgame.applyEffects();°Ïfor (Permanent permanent : game.getBattlefield().getActivePermanents(new FilterCreaturePermanent(), source.getControllerId(), game)) {°Ïpermanent.sacrifice(source.getSourceId(), game);°Ï}°Ïgame.applyEffects();°Ïfor (UUID playerId : game.getState().getPlayersInRange(source.getControllerId(), game)) {°ÏPlayer player = game.getPlayer(playerId);°Ïif (player != null) {°ÏSet<Card> cardsPlayer = exiledCards.get(playerId);°Ïif (cardsPlayer != null && !cardsPlayer.isEmpty()) {°Ïplayer.moveCards(cardsPlayer, Zone.BATTLEFIELD, source, game, false, false, false, null);°Ï}°Ï}°Ï}°Ïreturn true;°Ï}°Ïreturn false;°Ï}°Ï}°Ï
